================================================================================
                       üß† SAFE RESOURCE PACKER
           Intelligent File Classification & BSA/BA2 Packer
================================================================================

VERSION: 1.0.0
AUTHOR: Dudu
LICENSE: MIT License
GITHUB: https://github.com/ReidenXerx/safe-resource-packer
NEXUS: https://nexusmods.com/skyrimspecialedition/mods/XXXXX

================================================================================
‚ö†Ô∏è ANTIVIRUS DISCLAIMER - THIS IS NOT A VIRUS
================================================================================

WHY ANTIVIRUS MIGHT FLAG THIS TOOL:
‚Ä¢ File Processing: Processes many mod files rapidly (appears as "mass file 
  modification" to heuristic scanners)
‚Ä¢ Archive Creation: Creates BSA/BA2 archives and ESP files (flagged as 
  "suspicious file generation")
‚Ä¢ Batch Operations: Python scripts with batch launchers (flagged as 
  "potentially unwanted programs")
‚Ä¢ System Integration: Detects game installations (appears as "system scanning")
‚Ä¢ New Software: Not widely distributed, not in antivirus whitelists yet

THIS TOOL IS 100% SAFE:
‚úì Open Source: Full source code available on GitHub for inspection
‚úì Works Offline: No network activity except Python package downloads
‚úì No System Changes: Only processes mod files in chosen directories
‚úì No Admin Required: Runs with normal user permissions
‚úì Portable: No installation, no registry changes, no system files modified

IF YOUR ANTIVIRUS BLOCKS IT:
‚Ä¢ Add the extracted folder to your antivirus exclusions
‚Ä¢ Use Windows Defender (generally fewer false positives with Python tools)
‚Ä¢ Download from official sources only (GitHub/Nexus)

WHY WE CAN'T "FIX" THIS:
The tool's legitimate functionality (file processing, archive creation) 
naturally triggers heuristic detection. This is common with automation tools.

================================================================================
üìã TABLE OF CONTENTS
================================================================================

1. Overview & What This Tool Does
2. Critical Requirements
3. Installation Options
4. How to Use - Intelligent Packer (Single Mod)
5. How to Use - Batch Repacker (Multiple Mods)
6. Understanding the Output Files
7. Game-Specific Features (Skyrim vs Fallout 4)
8. Command Line Reference
9. Troubleshooting Common Issues
10. Safety Features & What We DON'T Do
11. Technical Details (How It Works)
12. FAQ

================================================================================
1. OVERVIEW & WHAT THIS TOOL DOES
================================================================================

THE PROBLEM:
You've generated custom mod files (BodySlide output, custom meshes, retextures)
and need to create a proper mod package. This involves:

‚Ä¢ Figuring out which files are new vs. modified vs. identical to vanilla
‚Ä¢ Packing new files into BSA/BA2 archives with correct format and chunking
‚Ä¢ Keeping modified files as loose overrides
‚Ä¢ Creating ESP files that properly load your archives
‚Ä¢ Packaging everything for distribution

This process is tedious and error-prone when done manually.

THE SOLUTION:
Safe Resource Packer automates this entire workflow using cryptographic 
SHA1 hashing to accurately classify files, then creates proper game archives
with correct formatting for Skyrim or Fallout 4.

WHAT IT DOES:
‚úì Scans your generated files and compares them against game files using SHA1
‚úì Automatically determines which files are new, modified, or identical
‚úì Creates properly formatted BSA/BA2 archives with correct chunking
‚úì Generates ESP files that load archives correctly
‚úì Packages everything into 7z archives for distribution
‚úì Processes single mods or entire collections in batch

WHAT IT DOESN'T DO:
‚úó Doesn't modify your original files (works on copies)
‚úó Doesn't guarantee specific performance improvements (results vary)
‚úó Doesn't fix broken mods or meshes
‚úó Doesn't create mod content (only packages existing files)

================================================================================
2. CRITICAL REQUIREMENTS
================================================================================

BUNDLED RELEASE (Recommended):
‚Ä¢ Windows 7 or later
‚Ä¢ Nothing else - Python and all dependencies are included

PYTHON INSTALLATION:
‚Ä¢ Python 3.7 or later
‚Ä¢ pip (Python package manager)
‚Ä¢ Dependencies (auto-installed): rich, click, colorama, psutil

OPTIONAL (Auto-installed when needed):
‚Ä¢ BSArch - For creating BSA/BA2 archives (tool offers to install)
‚Ä¢ 7-Zip - For compression (tool detects or uses fallback)

DISK SPACE:
‚Ä¢ Approximately 3x your source folder size for processing
‚Ä¢ Example: 5GB of generated files = ~15GB temp space needed

SUPPORTED GAMES:
‚Ä¢ The Elder Scrolls V: Skyrim (LE and SE)
‚Ä¢ Fallout 4

================================================================================
3. INSTALLATION OPTIONS
================================================================================

OPTION 1: BUNDLED RELEASE (Zero Setup - Recommended)
1. Download "safe-resource-packer-X.X.X-bundled.zip" from releases
2. Extract anywhere on your computer
3. Double-click "run_safe_resource_packer.bat"
4. Done! Everything is included.

OPTION 2: PYTHON PACKAGE (For Python Users)
1. Open command prompt or terminal
2. Run: pip install safe-resource-packer
3. Run: safe-resource-packer
4. Tool launches with interactive UI

OPTION 3: FROM SOURCE (For Developers)
1. Clone repository: git clone https://github.com/ReidenXerx/safe-resource-packer.git
2. Navigate to folder: cd safe-resource-packer
3. Install in dev mode: pip install -e .
4. Run: safe-resource-packer

FIRST-TIME SETUP:
‚Ä¢ Tool will offer to install BSArch (for optimal BSA/BA2 creation)
‚Ä¢ Select "Yes" when prompted, or install manually later
‚Ä¢ 7-Zip is auto-detected if installed, otherwise fallback is used

================================================================================
4. HOW TO USE - INTELLIGENT PACKER (Single Mod)
================================================================================

USE CASE: You've generated files (BodySlide output, custom textures, etc.) 
and want to package them into a proper mod.

STEP-BY-STEP (Complete Beginner Guide):

STEP 1: Launch the Tool
‚Ä¢ Double-click "run_safe_resource_packer.bat" (bundled) OR
‚Ä¢ Run "safe-resource-packer" from command line

STEP 2: Choose "Quick Start" Mode
‚Ä¢ Select option 1 from the main menu
‚Ä¢ This launches the interactive wizard

STEP 3: Point to Game Data Folder
‚Ä¢ This is your source reference (vanilla game files)
‚Ä¢ Example Skyrim SE: C:\Program Files (x86)\Steam\steamapps\common\Skyrim Special Edition\Data
‚Ä¢ Example Fallout 4: C:\Program Files (x86)\Steam\steamapps\common\Fallout 4\Data
‚Ä¢ TIP: You can drag and drop the folder path into the terminal

STEP 4: Point to Your Generated Files
‚Ä¢ This is your BodySlide output, custom meshes, etc.
‚Ä¢ Example: C:\Users\YourName\Documents\BodySlide\Output
‚Ä¢ Only include files you want to process

STEP 5: Choose Output Location
‚Ä¢ Where to save the final package
‚Ä¢ Example: C:\Users\YourName\Desktop\MyModPackage
‚Ä¢ Tool creates this folder if it doesn't exist

STEP 6: Enter Mod Name
‚Ä¢ Name for your mod (no spaces recommended)
‚Ä¢ Example: SexyArmorReplacer
‚Ä¢ Used for ESP and archive names

STEP 7: Select Game Type
‚Ä¢ Choose Skyrim or Fallout 4
‚Ä¢ This determines archive format (BSA vs BA2)

STEP 8: Let It Run
‚Ä¢ Tool processes all files automatically
‚Ä¢ Progress bars show what's happening
‚Ä¢ Takes a few seconds to several minutes depending on file count

WHAT YOU GET:
‚Ä¢ ModName.bsa or ModName.ba2 - Game archive with new files
‚Ä¢ ModName.esp - Plugin that loads the archive
‚Ä¢ ModName_Loose.7z - Modified files (install separately with higher priority)
‚Ä¢ ModName_v1.0.7z - Complete package for distribution
‚Ä¢ Installation instructions and file list

COMMAND LINE (For Advanced Users):
safe-resource-packer --source "C:\Skyrim\Data" --generated "C:\BodySlide\Output" --package "C:\MyMod" --mod-name "MyMod" --game-type skyrim

================================================================================
5. HOW TO USE - BATCH REPACKER (Multiple Mods)
================================================================================

USE CASE: You have a folder containing multiple mods and want to repack them 
all consistently with proper archives.

STEP-BY-STEP:

STEP 1: Launch the Tool
‚Ä¢ Double-click "run_safe_resource_packer.bat" OR
‚Ä¢ Run "safe-resource-packer" from command line

STEP 2: Choose "Batch Repacker" Mode
‚Ä¢ Select option 2 from the main menu
‚Ä¢ Launches batch processing wizard

STEP 3: Point to Folder Containing Mods
‚Ä¢ Folder with multiple mod subfolders
‚Ä¢ Each mod should be in its own subfolder
‚Ä¢ Example: C:\ModOrganizer2\mods or C:\MyMods

STEP 4: Choose Output Location
‚Ä¢ Where to save repackaged mods
‚Ä¢ Example: C:\Users\YourName\Desktop\RepackedMods

STEP 5: Select Game Type
‚Ä¢ Choose Skyrim or Fallout 4

STEP 6: Review Discovered Mods
‚Ä¢ Tool shows all mods found
‚Ä¢ You can select which ones to process

STEP 7: Let It Run
‚Ä¢ Processes multiple mods in parallel
‚Ä¢ Progress shown for each mod
‚Ä¢ Can take several minutes for large collections

WHAT YOU GET:
‚Ä¢ Each mod gets its own archive and ESP
‚Ä¢ Consistent naming across collection
‚Ä¢ Ready for installation in MO2 or manual install

NOTE: Batch repacking is only available through the interactive Console UI,
not via command-line flags.

================================================================================
6. UNDERSTANDING THE OUTPUT FILES
================================================================================

ARCHIVE FILES (.bsa or .ba2):
‚Ä¢ Contains your new files (not in vanilla game)
‚Ä¢ Loaded automatically by the ESP
‚Ä¢ Install these in your mod manager or Data folder

ESP FILES (.esp):
‚Ä¢ Plugin file that tells game to load your archive
‚Ä¢ Must be activated in your load order
‚Ä¢ Name must match archive name (ModName.esp loads ModName.bsa)

LOOSE FILES (ModName_Loose.7z):
‚Ä¢ Contains modified vanilla files
‚Ä¢ These MUST be installed as loose files (extract them)
‚Ä¢ Install with higher priority than archives (to override)

COMPLETE PACKAGE (ModName_v1.0.7z):
‚Ä¢ Everything bundled for distribution
‚Ä¢ Upload this to Nexus or share with others
‚Ä¢ Includes installation instructions

FILE CLASSIFICATIONS:
‚Ä¢ NEW FILES - No match in vanilla, safe to pack into archives
‚Ä¢ MODIFIED FILES - Different from vanilla, keep loose to override
‚Ä¢ IDENTICAL FILES - Same as vanilla, skipped (saves space)

================================================================================
7. GAME-SPECIFIC FEATURES
================================================================================

SKYRIM SE/LE:

Archive Format: .bsa (Bethesda Softworks Archive)

Chunking System:
‚Ä¢ ModName.bsa - General files (meshes, misc)
‚Ä¢ ModName - Textures.bsa - All texture files (.dds)
‚Ä¢ ModName - Meshes.bsa - All mesh files (.nif)
Tool handles chunking automatically based on file types.

Blacklisted Folders (Always Kept Loose):
‚Ä¢ SKSE/ - Script extender files
‚Ä¢ MCM/ - Mod Configuration Menu files
‚Ä¢ Sound/ - Audio files (compatibility)
‚Ä¢ Scripts/ - Some script files
‚Ä¢ Interface/ - UI modification files

ESP Loading:
‚Ä¢ ESP must be in load order
‚Ä¢ Archive loads automatically when ESP is active
‚Ä¢ Naming is critical (ESP and BSA names must match)

FALLOUT 4:

Archive Format: .ba2 (Bethesda Archive 2)

Asset Type System:
‚Ä¢ ModName - Main.ba2 - Meshes, misc files
‚Ä¢ ModName - Textures.ba2 - Textures (.dds)
Tool handles separation automatically.

Blacklisted Folders (Always Kept Loose):
‚Ä¢ F4SE/ - Script extender files
‚Ä¢ MCM/ - Mod Configuration Menu files
‚Ä¢ Sound/ - Audio files
‚Ä¢ Interface/ - UI files

ESP Loading:
‚Ä¢ ESP must be in load order
‚Ä¢ Archives load automatically when ESP is active
‚Ä¢ Naming convention is critical

================================================================================
8. COMMAND LINE REFERENCE
================================================================================

BASIC USAGE:
safe-resource-packer --source <path> --generated <path> --package <path> --mod-name <name> --game-type <game>

REQUIRED PARAMETERS:
--source PATH          Path to game Data folder (reference files)
--generated PATH       Path to your generated files (BodySlide output, etc.)

OUTPUT OPTIONS (Choose one):
--package PATH         Create complete package (recommended)
--output-pack PATH     Output for packable files only (advanced)
--output-loose PATH    Output for loose overrides only (advanced)

PACKAGING OPTIONS:
--mod-name NAME        Name for mod (no spaces recommended)
--game-type TYPE       Game: skyrim or fallout4
--game-path PATH       Path to game installation (for directory detection)
--esp-template PATH    Custom ESP template (optional)
--compression LEVEL    7z compression level 0-9 (default: 3)
--no-cleanup           Keep temporary files after processing

PERFORMANCE OPTIONS:
--threads NUMBER       Processing threads (default: 8)
--debug                Enable detailed logging
--log PATH             Custom log file location

UTILITY OPTIONS:
--install-bsarch       Install BSArch tool
--interactive          Launch interactive wizard
--validate             Validate paths only (don't process)
--quiet                Minimal output
--help                 Show help

EXAMPLES:

Complete packaging (recommended):
safe-resource-packer --source "C:\Skyrim\Data" --generated "C:\BodySlide\Output" --package "C:\MyMod" --mod-name "MyArmor" --game-type skyrim

Classification only (advanced):
safe-resource-packer --source "C:\Skyrim\Data" --generated "C:\BodySlide\Output" --output-pack "C:\Pack" --output-loose "C:\Loose"

High-performance processing:
safe-resource-packer --source "C:\Skyrim\Data" --generated "C:\Output" --package "C:\MyMod" --mod-name "FastMod" --game-type skyrim --threads 16 --compression 1

================================================================================
9. TROUBLESHOOTING COMMON ISSUES
================================================================================

ISSUE: Antivirus blocks or deletes files
SOLUTION: Add extracted folder to antivirus exclusions. This is a false 
positive due to file processing automation.

ISSUE: "Python not found" error
SOLUTION: Use bundled release (includes Python) OR install Python 3.7+ from 
python.org

ISSUE: "BSArch not found" warning
SOLUTION: Let tool install BSArch automatically, or install manually. Tool 
can work without it using ZIP fallback.

ISSUE: Disk space error
SOLUTION: Free up space. Processing requires ~3x your generated files size 
in temporary space.

ISSUE: Path too long errors (Windows)
SOLUTION: Extract to shorter path like C:\SRP\ instead of deep nested folders.
Or enable long paths in Windows registry.

ISSUE: ESP doesn't load archive in-game
SOLUTION: Ensure ESP and archive names match exactly. ESP must be active in 
load order.

ISSUE: Modified files not overriding correctly
SOLUTION: Ensure loose files are installed with higher priority than archives 
in your mod manager.

ISSUE: Processing is slow
SOLUTION: Increase threads (--threads 16) or reduce compression level 
(--compression 1). Also close other programs.

ISSUE: Tool crashes or freezes
SOLUTION: Check debug log (safe_resource_packer.log) for errors. Report issue 
on GitHub with log file.

================================================================================
10. SAFETY FEATURES & WHAT WE DON'T DO
================================================================================

WHAT WE DO TO KEEP YOUR FILES SAFE:

‚úì Never Modify Originals: All work done on copies in temp directories
‚úì Disk Space Checking: Validates available space before operations
‚úì Path Validation: Checks path lengths and characters
‚úì Comprehensive Logging: Detailed logs for troubleshooting
‚úì Error Handling: Graceful handling of issues with clear messages
‚úì Cleanup: Removes temp files after processing (unless --no-cleanup used)

WHAT WE DON'T DO:

‚úó Don't modify your source game files
‚úó Don't modify your original generated files
‚úó Don't make system-wide changes or registry edits
‚úó Don't require administrator privileges
‚úó Don't phone home or send telemetry
‚úó Don't install anything system-wide (bundled is portable)

RECOMMENDATIONS:

‚Ä¢ Always keep backups of your work
‚Ä¢ Test packaged mods in-game before distribution
‚Ä¢ Review debug logs if something seems wrong
‚Ä¢ Start with small test mods before processing large collections

================================================================================
11. TECHNICAL DETAILS (How It Works)
================================================================================

FILE CLASSIFICATION ALGORITHM:

1. SCANNING PHASE:
   ‚Ä¢ Recursively scan generated directory
   ‚Ä¢ Create SHA1 hash for each file
   ‚Ä¢ Build complete file inventory

2. COMPARISON PHASE:
   ‚Ä¢ For each generated file, search for matching path in source
   ‚Ä¢ Case-insensitive path matching for Windows compatibility
   ‚Ä¢ Compare SHA1 hashes if file exists in source

3. CLASSIFICATION:
   ‚Ä¢ NEW FILE: Path not found in source ‚Üí Pack into BSA/BA2
   ‚Ä¢ MODIFIED FILE: Path found but hash differs ‚Üí Keep loose
   ‚Ä¢ IDENTICAL FILE: Path and hash match ‚Üí Skip (no copy needed)
   ‚Ä¢ BLACKLISTED: Path in blacklist folder ‚Üí Always loose

4. ORGANIZATION:
   ‚Ä¢ Copy classified files to appropriate output directories
   ‚Ä¢ Maintain directory structure
   ‚Ä¢ Track statistics for reporting

ARCHIVE CREATION:

Skyrim (BSA):
‚Ä¢ Uses BSArch tool for optimal BSA creation
‚Ä¢ Separates textures and meshes into separate archives (chunking)
‚Ä¢ Format: BSArch -csse -af:ModName.bsa <files>
‚Ä¢ Fallback: ZIP compression if BSArch unavailable

Fallout 4 (BA2):
‚Ä¢ Uses BSArch for proper BA2 format
‚Ä¢ Separates textures from main assets
‚Ä¢ Format: BSArch -cfo4 -af:ModName - Main.ba2 <files>
‚Ä¢ Fallback: ZIP compression if BSArch unavailable

ESP GENERATION:

‚Ä¢ Uses game-appropriate ESP template (Skyrim.esm or Fallout4.esm)
‚Ä¢ Minimal plugin that references archive
‚Ä¢ Ensures game loads archive when ESP is active
‚Ä¢ Template files included with tool

MULTI-THREADING:

‚Ä¢ File classification uses configurable thread pool
‚Ä¢ Parallel processing of files for speed
‚Ä¢ Default: 8 threads (adjustable with --threads)
‚Ä¢ ThreadPoolExecutor for safe concurrency

SECURITY:

‚Ä¢ SHA1 hashing for file comparison (not for security, for identification)
‚Ä¢ No network activity except dependency downloads
‚Ä¢ No system modifications
‚Ä¢ Portable and sandboxed

================================================================================
12. FAQ (Frequently Asked Questions)
================================================================================

Q: Will this improve my game performance?
A: Maybe. BSA/BA2 archives can reduce file system overhead and improve load 
times compared to many loose files. However, results vary based on your 
system, number of mods, and setup. This tool automates correct packing - it 
doesn't guarantee specific performance numbers.

Q: Is this safe to use?
A: Yes. The tool never modifies your original files and works on copies. 
Everything is open-source for verification. Antivirus false positives are 
common with file processing tools.

Q: Do I need Python?
A: Not with the bundled release. Otherwise, yes - Python 3.7 or later.

Q: Does this work with Mod Organizer 2?
A: Yes. Install the packed archives as mods. Install loose files in a separate 
mod with higher priority to ensure they override packed content.

Q: What about script files?
A: Script files are generally kept loose for compatibility. SKSE/F4SE folders 
are automatically blacklisted and never packed.

Q: Can I customize which folders are kept loose?
A: Currently the blacklist is hardcoded (SKSE, MCM, Sound, Interface, etc.). 
Future versions may allow customization.

Q: Why BSArch instead of other tools?
A: BSArch creates proper Bethesda archive formats with correct headers and 
chunking. Other tools may create invalid or suboptimal archives.

Q: Can I use this for commercial projects?
A: Check the MIT license terms. Generally permissive but don't claim you 
created this tool.

Q: How do I report bugs?
A: Open an issue on GitHub with the debug log (safe_resource_packer.log) and 
steps to reproduce.

Q: Can this merge mod archives?
A: No. This tool is for packaging individual mods. For merging, use dedicated 
mod merging tools.

Q: Does this work on Linux/Mac?
A: The Python version should work cross-platform, but BSArch (Windows tool) 
may not work. Fallback compression will be used.

Q: What's the difference between Intelligent Packer and Batch Repacker?
A: Intelligent Packer is for single mods (BodySlide output, etc.). Batch 
Repacker processes collections of existing mods. Choose based on your use case.

================================================================================
üìû SUPPORT & CONTRIBUTION
================================================================================

GITHUB: https://github.com/ReidenXerx/safe-resource-packer
DOCUMENTATION: See docs/ folder for detailed guides
BUG REPORTS: GitHub Issues
QUESTIONS: Nexus comments or GitHub Discussions

LICENSE: MIT License - Free and open-source

================================================================================
üéØ Automates the tedious, does it correctly, saves you time.
================================================================================
